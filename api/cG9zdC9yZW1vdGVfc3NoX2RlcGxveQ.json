{"title":"VS Code远程连接服务器及部署前端项目","date":"2021-08-17T00:09:00.232Z","slug":"remote_ssh_deploy","comments":true,"tags":["Remote Deploy","RemoteSSH","VS Code","authorized_keys"],"updated":"2021-08-17T00:51:50.958Z","content":"<h4 id=\"0x00：安装Remote-SSH\">0x00：安装Remote SSH<a href=\"post/remote_ssh_deploy#0x00：安装Remote-SSH\"></a></h4><ul>\n<li><code>VSCode</code>扩展栏搜索<code>remote ssh</code>后点击安装即可<br><img src=\"../images/20210817/remote_ssh.png\" alt=\"remote_ssh\"><h4 id=\"0x01：添加服务器\"><a href=\"#0x01：添加服务器\" class=\"headerlink\" title=\"0x01：添加服务器\"></a>0x01：添加服务器</h4></li>\n<li><code>VSCode</code>点击左侧<code>远程资源管理器</code>后点击<code>加号</code><br><img src=\"../images/20210817/add_server.png\" alt=\"add_server\"></li>\n<li><code>VSCode</code>顶部中央弹出连接信息,输入<code>ssh 用户名@服务器地址</code>即可<br><img src=\"../images/20210817/connection_server.png\" alt=\"connection_server\"></li>\n<li>选择配置文件默认即可</li>\n<li>添加完成后<code>远程资源管理器</code>便会增加一条服务器信息，点击右侧连接即可</li>\n<li>选择服务器平台后输入服务器密码</li>\n<li>设置服务器默认文件夹<br><img src=\"../images/20210817/select_folder.png\" alt=\"select_folder\"><h4 id=\"0x02：免密登录\"><a href=\"#0x02：免密登录\" class=\"headerlink\" title=\"0x02：免密登录\"></a>0x02：免密登录</h4></li>\n<li>生成密钥<ul>\n<li>打开<code>cmd</code>输入<code>ssh-keygen -t rsa -b 4096</code>即可，一路回车后会在<code>C:\\Users\\用户名\\.ssh\\</code>生成<code>id_rsa.pub</code>文件</li>\n</ul>\n</li>\n<li>用<code>记事本</code>或者<code>VS Code</code>打开<code>id_rsa.pub</code>，将文件内容复制到<code>远程服务器</code> <code>/root/.ssh/authorized_keys</code>尾行中，如果没<code>authorized_keys</code>则新建，反之追加。如果没有<code>.ssh</code>文件夹，则在命令行输入<code>ssh localhost</code>即可生成<br><img src=\"../images/20210817/authorized_keys.png\" alt=\"authorized_keys\"><h4 id=\"0x03：安装Deploy\"><a href=\"#0x03：安装Deploy\" class=\"headerlink\" title=\"0x03：安装Deploy\"></a>0x03：安装Deploy</h4><code>VSCode</code>扩展栏搜索<code>deploy</code>后点击安装即可<br><img src=\"../images/20210817/deploy.png\" alt=\"deploy\"><h4 id=\"0x04：配置Deploy\"><a href=\"#0x04：配置Deploy\" class=\"headerlink\" title=\"0x04：配置Deploy\"></a>0x04：配置Deploy</h4></li>\n<li>打开<code>settings.json</code>输入以下配置信息<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"deploy\": &#123;</span><br><span class=\"line\">    \"packages\": [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"项目名称\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"项目描述\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"files\"</span>: [</span><br><span class=\"line\">                <span class=\"string\">\"dist/**\"</span></span><br><span class=\"line\">            ],</span><br><span class=\"line\">            <span class=\"attr\">\"deployOnSave\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    \"targets\": [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"sftp\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"项目名称\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"项目描述\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"dir\"</span>: <span class=\"string\">\"/frontend/mobile/next\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"host\"</span>: <span class=\"string\">\"服务器IP\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"port\"</span>: <span class=\"number\">22</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"user\"</span>: <span class=\"string\">\"用户名\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"password\"</span>: <span class=\"string\">\"密码\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"checkBeforeDeploy\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"mappings\"</span>: [</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"attr\">\"source\"</span>: <span class=\"string\">\"dist\"</span>,</span><br><span class=\"line\">                    <span class=\"attr\">\"target\"</span>: <span class=\"string\">\"dist\"</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"0x05：部署项目\">0x05：部署项目<a href=\"post/remote_ssh_deploy#0x05：部署项目\"></a></h4><ul>\n<li>鼠标右键或者<code>Ctrl+Alt+F</code><br><img src=\"../images/20210817/deploy_project.png\" alt=\"deploy_project\"></li>\n</ul>\n","next":{"title":"Google常用的搜索语法及搜索的“艺术”","slug":"google-search"},"link":"https://www.alipay.one/post/remote_ssh_deploy/"}