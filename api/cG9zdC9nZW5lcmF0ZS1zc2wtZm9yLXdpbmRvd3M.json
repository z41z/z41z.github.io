{"title":"利用OpenSSL在Window10生成自签名证书","date":"2020-11-25T08:06:37.211Z","slug":"generate-ssl-for-windows","comments":true,"updated":"2020-11-25T08:36:16.803Z","content":"<h4 id=\"下载并安装OpenSSL\">下载并安装OpenSSL<a href=\"post/generate-ssl-for-windows#下载并安装OpenSSL\"></a></h4><ul>\n<li><p>下载<a href=\"https://slproweb.com/products/Win32OpenSSL.html\" target=\"_blank\" rel=\"noopener\">OpenSSL</a></p>\n<p> <img src=\"/images/download-openssl.png\" alt=\"OpenSSL\"></p>\n</li>\n<li><p>运行安装目录下<code>bin</code>目录下的<code>openssl.exe</code></p>\n<p> <img src=\"/images/run-openssl.png\" alt=\"RunOpenSSL\"></p>\n</li>\n</ul>\n<h4 id=\"生成证书\">生成证书<a href=\"post/generate-ssl-for-windows#生成证书\"></a></h4><ul>\n<li>生成<code>.key</code>文件：<ul>\n<li>输入<code>genrsa -des3 -out server.key 2048</code>后再输入密码,我这里设置的是<code>123456</code></li>\n</ul>\n</li>\n<li>生成<code>.csr</code>文件<ul>\n<li>输入<code>req -new -key server.key -out server.csr</code>后再输入刚刚填写的<code>123456</code>密码</li>\n</ul>\n</li>\n<li><p>填写基本信息</p>\n<p><img src=\"/images/generate-ssl.png\" alt=\"GenerateSSL\"></p>\n</li>\n</ul>\n<h4 id=\"删除密钥对应的密码-防止nginx每次启动输入密码\">删除密钥对应的密码,防止nginx每次启动输入密码<a href=\"post/generate-ssl-for-windows#删除密钥对应的密码-防止nginx每次启动输入密码\"></a></h4><p>  <code>rsa -in server.key -out test.com.key</code></p>\n<h4 id=\"生成crt证书\">生成crt证书<a href=\"post/generate-ssl-for-windows#生成crt证书\"></a></h4><p>  <code>x509 -req -days 365 -in server.csr -signkey test.com.key -out test.com.crt</code><br>  <img src=\"/images/ssl.png\" alt=\"ssl\"></p>\n<h4 id=\"配置hosts文件以及nginx\">配置hosts文件以及nginx<a href=\"post/generate-ssl-for-windows#配置hosts文件以及nginx\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1       test.com</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">listen</span> <span class=\"number\">443</span>;</span><br><span class=\"line\">  <span class=\"attribute\">server_name</span>  test.com;</span><br><span class=\"line\">  <span class=\"attribute\">ssl</span> <span class=\"literal\">on</span>;</span><br><span class=\"line\">  <span class=\"comment\"># 证书crt路径</span></span><br><span class=\"line\">  <span class=\"attribute\">ssl_certificate</span> test.com.crt;</span><br><span class=\"line\">  <span class=\"comment\"># 证书key路径</span></span><br><span class=\"line\">  <span class=\"attribute\">ssl_certificate_key</span> test.com.key;</span><br><span class=\"line\">  <span class=\"attribute\">ssl_session_timeout</span> <span class=\"number\">5m</span>;</span><br><span class=\"line\">  <span class=\"attribute\">ssl_prefer_server_ciphers</span> <span class=\"literal\">on</span>;</span><br><span class=\"line\">  <span class=\"attribute\">location</span> / &#123;</span><br><span class=\"line\">      <span class=\"attribute\">root</span>   html;</span><br><span class=\"line\">      <span class=\"attribute\">index</span>  index.html index.htm;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","prev":{"title":"CentOS安装Cockpit管理主机","slug":"install-cockpit-on-centos"},"next":{"title":"Nginx常用代理场景及常用配置","slug":"nginx-common-options"},"link":"https://www.alipay.one/post/generate-ssl-for-windows/"}