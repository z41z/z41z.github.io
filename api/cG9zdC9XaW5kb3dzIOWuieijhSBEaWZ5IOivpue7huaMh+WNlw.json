{"title":"Windows 安装 Dify 详细指南","date":"2025-02-20T00:54:24.375Z","slug":"Windows 安装 Dify 详细指南","comments":true,"tags":["AI","Dify","人工智能","大模型","工作流","智能体"],"updated":"2025-02-20T00:55:16.797Z","content":"<h2 id=\"前提条件\">前提条件<a href=\"post/Windows 安装 Dify 详细指南#前提条件\"></a></h2><p>在 Windows 上安装 Dify 需要以下工具和环境：</p>\n<ul>\n<li><strong>Windows 10/11</strong></li>\n<li><strong>WSL 2（Windows Subsystem for Linux）</strong>（建议使用 Ubuntu 版本）</li>\n<li><strong>Docker Desktop</strong>（确保 WSL 2 支持已启用）</li>\n<li><strong>Git</strong>（用于克隆代码仓库）</li>\n<li><strong>Python 3.8+</strong>（用于管理依赖项）</li>\n<li><strong>Node.js 16+</strong>（用于前端构建）</li>\n<li><strong>Yarn</strong>（前端依赖管理）</li>\n</ul>\n<hr>\n<h2 id=\"1-安装-WSL-2-和-Ubuntu\">1. 安装 WSL 2 和 Ubuntu<a href=\"post/Windows 安装 Dify 详细指南#1-安装-WSL-2-和-Ubuntu\"></a></h2><h3 id=\"1-1-启用-WSL\">1.1 启用 WSL<a href=\"post/Windows 安装 Dify 详细指南#1-1-启用-WSL\"></a></h3><p>在 PowerShell（管理员权限）中运行：<br><figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wsl --install</span><br></pre></td></tr></table></figure></p>\n<p>安装完成后，建议重启计算机。</p>\n<h3 id=\"1-2-设置默认-WSL-版本\">1.2 设置默认 WSL 版本<a href=\"post/Windows 安装 Dify 详细指南#1-2-设置默认-WSL-版本\"></a></h3><figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wsl --set-default-version <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-3-安装-Ubuntu\">1.3 安装 Ubuntu<a href=\"post/Windows 安装 Dify 详细指南#1-3-安装-Ubuntu\"></a></h3><p>在 Microsoft Store 中搜索 “Ubuntu”，安装最新 LTS 版本。</p>\n<hr>\n<h2 id=\"2-安装-Docker\">2. 安装 Docker<a href=\"post/Windows 安装 Dify 详细指南#2-安装-Docker\"></a></h2><h3 id=\"2-1-下载并安装-Docker-Desktop\">2.1 下载并安装 Docker Desktop<a href=\"post/Windows 安装 Dify 详细指南#2-1-下载并安装-Docker-Desktop\"></a></h3><p>从 <a href=\"https://www.docker.com/products/docker-desktop\" target=\"_blank\" rel=\"noopener\">Docker 官网</a> 下载 Windows 版本并安装。</p>\n<h3 id=\"2-2-启用-WSL-2-后端支持\">2.2 启用 WSL 2 后端支持<a href=\"post/Windows 安装 Dify 详细指南#2-2-启用-WSL-2-后端支持\"></a></h3><p>打开 Docker Desktop 设置，前往 <strong>General</strong>，勾选 <strong>Use the WSL 2 based engine</strong>。</p>\n<h3 id=\"2-3-验证-Docker-是否正确安装\">2.3 验证 Docker 是否正确安装<a href=\"post/Windows 安装 Dify 详细指南#2-3-验证-Docker-是否正确安装\"></a></h3><p>在 WSL 终端中运行：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker -v</span><br><span class=\"line\">docker run hello-world</span><br></pre></td></tr></table></figure></p>\n<p>如果输出 Docker 版本信息且容器成功运行，说明安装成功。</p>\n<hr>\n<h2 id=\"3-克隆-Dify-代码库\">3. 克隆 Dify 代码库<a href=\"post/Windows 安装 Dify 详细指南#3-克隆-Dify-代码库\"></a></h2><p>在 WSL 终端中执行：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/langgenius/dify.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> dify</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"4-配置后端\">4. 配置后端<a href=\"post/Windows 安装 Dify 详细指南#4-配置后端\"></a></h2><h3 id=\"4-1-进入后端目录\">4.1 进入后端目录<a href=\"post/Windows 安装 Dify 详细指南#4-1-进入后端目录\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> api</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-2-配置环境变量\">4.2 配置环境变量<a href=\"post/Windows 安装 Dify 详细指南#4-2-配置环境变量\"></a></h3><p>复制 <code>.env.example</code> 并重命名为 <code>.env</code>，然后编辑其中的数据库和 API 相关配置。</p>\n<h3 id=\"4-3-启动后端\">4.3 启动后端<a href=\"post/Windows 安装 Dify 详细指南#4-3-启动后端\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose up -d</span><br></pre></td></tr></table></figure>\n<p>如果出现权限问题，可尝试：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod +x scripts/*.sh</span><br></pre></td></tr></table></figure></p>\n<p>然后重新运行 <code>docker-compose up -d</code>。</p>\n<hr>\n<h2 id=\"5-配置前端\">5. 配置前端<a href=\"post/Windows 安装 Dify 详细指南#5-配置前端\"></a></h2><h3 id=\"5-1-进入前端目录\">5.1 进入前端目录<a href=\"post/Windows 安装 Dify 详细指南#5-1-进入前端目录\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ../web</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-2-安装依赖\">5.2 安装依赖<a href=\"post/Windows 安装 Dify 详细指南#5-2-安装依赖\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn install</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-3-运行前端\">5.3 运行前端<a href=\"post/Windows 安装 Dify 详细指南#5-3-运行前端\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn dev</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"6-访问-Dify\">6. 访问 Dify<a href=\"post/Windows 安装 Dify 详细指南#6-访问-Dify\"></a></h2><p>如果一切正常，Dify 服务将启动，可以通过浏览器访问：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://localhost:3000</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"7-其他可能问题及解决方案\">7. 其他可能问题及解决方案<a href=\"post/Windows 安装 Dify 详细指南#7-其他可能问题及解决方案\"></a></h2><h3 id=\"7-1-端口冲突\">7.1 端口冲突<a href=\"post/Windows 安装 Dify 详细指南#7-1-端口冲突\"></a></h3><p>如果 <code>docker-compose up -d</code> 时报端口占用错误，可以修改 <code>.env</code> 文件中的端口。</p>\n<h3 id=\"7-2-数据库连接失败\">7.2 数据库连接失败<a href=\"post/Windows 安装 Dify 详细指南#7-2-数据库连接失败\"></a></h3><p>确保 PostgreSQL 正常运行，可尝试：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps</span><br></pre></td></tr></table></figure></p>\n<p>如果 PostgreSQL 容器未运行，使用 <code>docker-compose restart</code> 重新启动。</p>\n<h3 id=\"7-3-WSL-网络问题\">7.3 WSL 网络问题<a href=\"post/Windows 安装 Dify 详细指南#7-3-WSL-网络问题\"></a></h3><p>如果 WSL 内部网络访问受限，可尝试运行：<br><figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">netsh winsock reset</span><br></pre></td></tr></table></figure></p>\n<p>然后重启计算机。</p>\n<hr>\n<h2 id=\"8-卸载-Dify（可选）\">8. 卸载 Dify（可选）<a href=\"post/Windows 安装 Dify 详细指南#8-卸载-Dify（可选）\"></a></h2><p>如果需要卸载 Dify，可以执行以下操作：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose down -v</span><br><span class=\"line\">rm -rf dify</span><br></pre></td></tr></table></figure></p>\n<p>这样可以完全移除 Dify 及其相关数据。</p>\n<hr>\n<h2 id=\"9-总结\">9. 总结<a href=\"post/Windows 安装 Dify 详细指南#9-总结\"></a></h2><p>安装 Dify 主要分为以下步骤：</p>\n<ol>\n<li>安装 WSL 2 并启用 Ubuntu</li>\n<li>安装 Docker 并配置 WSL 2 后端</li>\n<li>克隆 Dify 代码库</li>\n<li>配置并运行后端（API）</li>\n<li>配置并运行前端（Web）</li>\n<li>通过浏览器访问 Dify</li>\n</ol>\n<p>这样，你就可以在 Windows 上顺利运行 Dify 了！</p>\n","prev":{"title":"使用 Dify 创建基于大模型的发票识别 Agent","slug":"使用 Dify 创建基于大模型的发票识别 Agent"},"next":{"title":"本地训练 DeepSeek 语言模型","slug":"本地训练DeepSeek语言模型"},"link":"https://www.alipay.one/post/Windows 安装 Dify 详细指南/","toc":[{"title":"前提条件","id":"前提条件","index":"1"},{"title":"1. 安装 WSL 2 和 Ubuntu","id":"1-安装-WSL-2-和-Ubuntu","index":"2","children":[{"title":"1.1 启用 WSL","id":"1-1-启用-WSL","index":"2.1"},{"title":"1.2 设置默认 WSL 版本","id":"1-2-设置默认-WSL-版本","index":"2.2"},{"title":"1.3 安装 Ubuntu","id":"1-3-安装-Ubuntu","index":"2.3"}]},{"title":"2. 安装 Docker","id":"2-安装-Docker","index":"3","children":[{"title":"2.1 下载并安装 Docker Desktop","id":"2-1-下载并安装-Docker-Desktop","index":"3.1"},{"title":"2.2 启用 WSL 2 后端支持","id":"2-2-启用-WSL-2-后端支持","index":"3.2"},{"title":"2.3 验证 Docker 是否正确安装","id":"2-3-验证-Docker-是否正确安装","index":"3.3"}]},{"title":"3. 克隆 Dify 代码库","id":"3-克隆-Dify-代码库","index":"4"},{"title":"4. 配置后端","id":"4-配置后端","index":"5","children":[{"title":"4.1 进入后端目录","id":"4-1-进入后端目录","index":"5.1"},{"title":"4.2 配置环境变量","id":"4-2-配置环境变量","index":"5.2"},{"title":"4.3 启动后端","id":"4-3-启动后端","index":"5.3"}]},{"title":"5. 配置前端","id":"5-配置前端","index":"6","children":[{"title":"5.1 进入前端目录","id":"5-1-进入前端目录","index":"6.1"},{"title":"5.2 安装依赖","id":"5-2-安装依赖","index":"6.2"},{"title":"5.3 运行前端","id":"5-3-运行前端","index":"6.3"}]},{"title":"6. 访问 Dify","id":"6-访问-Dify","index":"7"},{"title":"7. 其他可能问题及解决方案","id":"7-其他可能问题及解决方案","index":"8","children":[{"title":"7.1 端口冲突","id":"7-1-端口冲突","index":"8.1"},{"title":"7.2 数据库连接失败","id":"7-2-数据库连接失败","index":"8.2"},{"title":"7.3 WSL 网络问题","id":"7-3-WSL-网络问题","index":"8.3"}]},{"title":"8. 卸载 Dify（可选）","id":"8-卸载-Dify（可选）","index":"9"},{"title":"9. 总结","id":"9-总结","index":"10"}]}